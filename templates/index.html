<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DocuVision • Demo</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="container">
    <h1>DocuVision</h1>
    <p class="subtitle">Intelligent Document Classification &amp; Extraction</p>

    <form id="uploadForm">
      <label class="file-label">
        <input type="file" id="file" name="file" required>
        <span>Select JPG / PNG / PDF (≤10&nbsp;MB)</span>
      </label>
      <button id="submitBtn" type="submit">Upload&nbsp;&amp;&nbsp;Analyse</button>
    </form>

    <div id="loader" class="hidden">Processing…</div>
    <pre id="result"></pre>
  </div>

<script>
document.getElementById('uploadForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const inp = document.getElementById('file');
  if(!inp.files.length) return;

  const fd = new FormData();
  fd.append('file', inp.files[0]);

  document.getElementById('loader').classList.remove('hidden');
  document.getElementById('result').textContent = '';

  try{
    const res = await fetch('/upload', {method:'POST', body: fd});
    const data = await res.json();
    document.getElementById('result').textContent =
      JSON.stringify(data, null, 2);
  }catch(err){
    console.error(err);
    document.getElementById('result').textContent = 'Error – check console';
  }finally{
    document.getElementById('loader').classList.add('hidden');
  }
});
</script>
</body>
</html>